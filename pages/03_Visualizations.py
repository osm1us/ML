import streamlit as st
from PIL import Image
import os

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(page_title="–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–∞—Ö", layout="wide")

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.title("üìä –í–∏–∑—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤")
st.markdown("""
–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤ –∏ –∏—Ö —Ü–µ–Ω–æ–π.
""")

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–¥–ø–∏—Å—å—é
def display_image_with_caption(image_path, caption):
    try:
        image = Image.open(f"figures/{image_path}")
        st.image(image, caption=caption, use_column_width=True)
    except Exception as e:
        st.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ {image_path}")

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
col1, col2 = st.columns(2)

with st.expander("üìà –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è", expanded=True):
    st.subheader("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç—ã")
    display_image_with_caption("price_distribution.png", "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç—ã")
    st.markdown("""
    - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ –∏–º–µ—é—Ç —Ü–µ–Ω—É –¥–æ $5000
    - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–º–µ–µ—Ç –¥–ª–∏–Ω–Ω—ã–π —Ö–≤–æ—Å—Ç –≤–ø—Ä–∞–≤–æ, —á—Ç–æ —Ç–∏–ø–∏—á–Ω–æ –¥–ª—è —Ü–µ–Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –ù–∞–±–ª—é–¥–∞—é—Ç—Å—è –ø–∏–∫–∏ –≤ —Ä–∞–π–æ–Ω–µ –∫—Ä—É–≥–ª—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ü–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, $1500, $2000)
    """)

with col1:
    st.subheader("–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ü–µ–Ω—ã –æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫")
    
    st.markdown("### –í–ª–∏—è–Ω–∏–µ –≤–µ—Å–∞ –Ω–∞ —Ü–µ–Ω—É")
    display_image_with_caption("price_vs_carat.png", "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ü–µ–Ω—ã –æ—Ç –≤–µ—Å–∞ (–∫–∞—Ä–∞—Ç)")
    st.markdown("""
    - –ß–µ—Ç–∫–æ –≤–∏–¥–Ω–∞ –Ω–µ–ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ü–µ–Ω—ã –æ—Ç –≤–µ—Å–∞
    - –ù–∞–±–ª—é–¥–∞—é—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏, —á—Ç–æ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ü–µ–Ω
    - –†–∞–∑–±—Ä–æ—Å —Ü–µ–Ω —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –≤–µ—Å–∞ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–∞
    """)
    
    st.markdown("### –í–ª–∏—è–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–≥—Ä–∞–Ω–∫–∏")
    display_image_with_caption("cut_vs_price.png", "–í–ª–∏—è–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–≥—Ä–∞–Ω–∫–∏ –Ω–∞ —Ü–µ–Ω—É")
    st.markdown("""
    - –ë—Ä–∏–ª–ª–∏–∞–Ω—Ç—ã —Å –∏–¥–µ–∞–ª—å–Ω–æ–π –æ–≥—Ä–∞–Ω–∫–æ–π (Ideal) –≤ —Å—Ä–µ–¥–Ω–µ–º –¥–µ—à–µ–≤–ª–µ, —á–µ–º —Å –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π
    - –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –ø—Ä–∏ –ª—É—á—à–µ–π –æ–≥—Ä–∞–Ω–∫–µ —Ç–µ—Ä—è–µ—Ç—Å—è –±–æ–ª—å—à–µ –≤–µ—Å–∞ –∫–∞–º–Ω—è
    - –ù–∞–∏–±–æ–ª—å—à–∏–π —Ä–∞–∑–±—Ä–æ—Å —Ü–µ–Ω —É –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤ —Å –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –æ–≥—Ä–∞–Ω–∫–æ–π
    """)

with col2:
    st.subheader("–ê–Ω–∞–ª–∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤")
    
    st.markdown("### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ü–≤–µ—Ç—É –∏ —á–∏—Å—Ç–æ—Ç–µ")
    display_image_with_caption("color_clarity_distribution.png", "–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤ –ø–æ —Ü–≤–µ—Ç—É –∏ —á–∏—Å—Ç–æ—Ç–µ")
    st.markdown("""
    - –ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω—ã –±—Ä–∏–ª–ª–∏–∞–Ω—Ç—ã —Å —Ü–≤–µ—Ç–∞–º–∏ G, H, I
    - –ù–∞–∏–±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–∏–ª–ª–∏–∞–Ω—Ç–æ–≤ –∏–º–µ—é—Ç —á–∏—Å—Ç–æ—Ç—É SI1, VS2, VS1
    - –ë—Ä–∏–ª–ª–∏–∞–Ω—Ç—ã –≤—ã—Å—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (D, IF) –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ä–µ–∂–µ
    """)
    
    st.markdown("### –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤")
    display_image_with_caption("correlation_matrix.png", "–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —á–∏—Å–ª–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤")
    st.markdown("""
    - –ù–∞–∏–±–æ–ª—å—à–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å —Ü–µ–Ω–æ–π —É –≤–µ—Å–∞ (carat) –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ (x, y, z)
    - –°–∏–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –≤–µ—Å–æ–º (–º—É–ª—å—Ç–∏–∫–æ–ª–ª–∏–Ω–µ–∞—Ä–Ω–æ—Å—Ç—å)
    - –ì–ª—É–±–∏–Ω–∞ (depth) –∏–º–µ–µ—Ç —Å–ª–∞–±—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å —Ü–µ–Ω–æ–π
    """)

# –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –º–æ–¥–µ–ª–µ–π, –µ—Å–ª–∏ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
metrics_files = [f for f in os.listdir("figures") if "metrics" in f.lower()]
if metrics_files:
    st.markdown("---")
    st.header("–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è")
    
    for metric_file in metrics_files:
        model_name = metric_file.replace("_metrics_table.png", "").replace("_", " ").title()
        st.subheader(f"–ú–æ–¥–µ–ª—å: {model_name}")
        display_image_with_caption(metric_file, f"–ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏ {model_name}")
